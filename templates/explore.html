{% extends "base.html" %}

{% block title %}Explore Bubbles{% endblock %}

{% block content %}
<h2>🔍 Explore Bubbles</h2>
<p>Search for bubbles by content, user, or category.</p>

<!-- Search Form -->
<form method="POST">
    <label for="query">Search Query (optional)</label>
    <input type="text" name="query" value="{{ query }}"><br>

    <label for="query_category">Filter by Category (optional)</label>
    <input type="text" name="query_category" value="{{ query_category }}"><br>

    <button type="submit">Search</button>
</form>

<!-- Display Results -->
{% if bubbles %}
    <h3>Search Results</h3>
    <ul>
        {% for bubble in bubbles %}
            <li>💬 {{ bubble.content }} (User: {{ bubble.user }}, Category: {{ bubble.category }})</li>
        {% endfor %}
    </ul>

    <!-- Pagination Controls -->
    <div class="pagination">
        {% if offset > 0 %}
            <a href="{{ url_for('explore', query=query, query_category=query_category, limit=limit, offset=offset - limit) }}">⬅️ Previous</a>
        {% endif %}

        {% if has_more %}
            <a href="{{ url_for('explore', query=query, query_category=query_category, limit=limit, offset=offset + limit) }}">Next ➡️</a>
        {% endif %}
    </div>
{% endif %}

<!-- Back to Main Menu -->
<footer>
    <p><a href="{{ url_for('menu') }}">⬅️ Back to Main Menu</a></p>
</footer>
{% endblock %}
